var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=r);r>a;a++)if(a in this&&this[a]===e)return a;return-1}),cf_debounce=function(e,r,a){var t;return function(){var i=this,o=arguments,n=function(){t=null,a||e.apply(i,o)},d=a&&!t;clearTimeout(t),t=setTimeout(n,r),d&&e.apply(i,o)}},calders_forms_check_conditions=function(r){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[r]){var a=e("#"+r);for(var t in caldera_conditionals[r]){var i=jQuery("#conditional_"+t);if(i.length){var o=caldera_conditionals[r][t].type,n=caldera_conditionals[r][t].group,d=[];for(var s in n){var l={},c=n[s];for(var f in c){var u=a.find('[data-field="'+c[f].field+'"]'),h=[],g="function"==typeof c[f].value?c[f].value():c[f].value;if("undefined"!=typeof c[f].selectors)for(var p in c[f].selectors){var m=new RegExp(p,"g");g=g.replace(m,e(c[f].selectors[p]).val())}if(l[f]=!1,u.is(":radio,:checkbox")?u=u.filter(":checked"):u.is("div")&&(u=jQuery("<input>").val(u.html())),u.length)for(var _=0;_<u.length;_++)h.push(u[_].value);else h.push(c[f].field);switch(c[f].compare){case"is":h.length&&h.indexOf(g.toString())>=0&&(l[f]=!0);break;case"isnot":h.length&&h.indexOf(g)<0&&(l[f]=!0);break;case">":case"greater":l[f]=parseFloat(h.reduce(function(e,r){return e+r}))>parseFloat(g);break;case"<":case"smaller":l[f]=parseFloat(h.reduce(function(e,r){return e+r}))<parseFloat(g);break;case"startswith":for(var _=0;_<h.length;_++)h[_].toLowerCase().substr(0,g.toLowerCase().length)===g.toLowerCase()&&(l[f]=!0);break;case"endswith":for(var _=0;_<h.length;_++)h[_].toLowerCase().substr(h[_].toLowerCase().length-g.toLowerCase().length)===g.toLowerCase()&&(l[f]=!0);break;case"contains":for(var _=0;_<h.length;_++)h[_].toLowerCase().indexOf(g)>=0&&(l[f]=!0)}}istrue=!0;for(var v in l)if(l[v]===!1){istrue=!1;break}d.push(istrue)}var y,b=jQuery("#conditional-"+t+"-tmpl").html(),w=jQuery("#conditional_"+t),j=jQuery('[data-field="'+t+'"]');d.length&&d.indexOf(!0)>=0?"show"===o?y="show":"hide"===o?y="hide":"disable"===o&&(y="disable"):y="show"===o?"hide":"disable"===o?"enable":"show","show"===y?w.html().length||(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===y?w.html().length&&(j.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===y?w.html().length?(j.prop("disabled",!1),jQuery("#"+t).prop("disabled",!1)):(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===y&&(w.html().length?(j.prop("disabled","disabled"),jQuery("#"+t).prop("disabled","disabled")):(w.html(b).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+t+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(r){var a=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(a)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);