var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(c){function d(a){if(b[a])return b[a]}if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[c]){var e=a(document.getElementById(c));for(var f in caldera_conditionals[c]){if(jQuery("#conditional_"+f).length){var g=caldera_conditionals[c][f].type,h=caldera_conditionals[c][f].group,i=[];for(var j in h){var k={},l=h[j];for(var m in l){var n=e.find('[data-field="'+l[m].field+'"]'),o=[],p="function"==typeof l[m].value?l[m].value():l[m].value;if(void 0!==l[m].selectors)for(var q in l[m].selectors){var r=new RegExp(q,"g");p=p.replace(r,a(l[m].selectors[q]).val())}if(k[m]=!1,n.is(":radio,:checkbox")?n=n.filter(":checked"):n.is("div")&&(n=jQuery("<input>").val(n.html())),n.length)for(var s=0;s<n.length;s++)o.push(n[s].value);else o.push(l[m].field);switch(l[m].compare){case"is":o.length&&o.indexOf(p.toString())>=0&&(k[m]=!0);break;case"isnot":o.length&&o.indexOf(p)<0&&(k[m]=!0);break;case">":case"greater":k[m]=parseFloat(o.reduce(function(a,b){return a+b}))>parseFloat(p);break;case"<":case"smaller":k[m]=parseFloat(o.reduce(function(a,b){return a+b}))<parseFloat(p);break;case"startswith":for(var s=0;s<o.length;s++)o[s].toLowerCase().substr(0,p.toLowerCase().length)===p.toLowerCase()&&(k[m]=!0);break;case"endswith":for(var s=0;s<o.length;s++)o[s].toLowerCase().substr(o[s].toLowerCase().length-p.toLowerCase().length)===p.toLowerCase()&&(k[m]=!0);break;case"contains":for(var s=0;s<o.length;s++)o[s].toLowerCase().indexOf(p)>=0&&(k[m]=!0)}}istrue=!0;for(var t in k)if(!1===k[t]){istrue=!1;break}i.push(istrue)}var u,v=jQuery("#conditional-"+f+"-tmpl").html(),w=jQuery("#conditional_"+f),x=jQuery('[data-field="'+f+'"]');i.length&&i.indexOf(!0)>=0?"show"===g?u="show":"hide"===g?u="hide":"disable"===g&&(u="disable"):u="show"===g?"hide":"disable"===g?"enable":"show","show"===u?w.html().length||(w.html(v).trigger("cf.add"),jQuery(document).trigger("cf.add"),function(b){var c=d(b);if(void 0!=c)if("object"==typeof c)for(var e in c)!0===c[e]&&a(document.getElementById(e)).prop("checked",!0);else a("#"+b).val(c)}(f)):"hide"===u?w.html().length&&(!function(c){var d=a(document.getElementById(c));if(d.length){var e=d.val();e&&(b[c]=e)}else{var f;d=a("."+c),b[c]={},d.each(function(d,e){f=a(e),f.prop("checked")?b[c][f.attr("id")]=!0:b[c][f.attr("id")]=!1})}}(f),x.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===u?w.html().length?x.prop("disabled",!1):(w.html(v).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===u&&(w.html().length?x.prop("disabled","disabled"):(w.html(v).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+f+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);